Object ChinaTankCommandTank
  ;BATTUH MASTUH TANK REPORTING
  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging
  UpgradeCameo2 = Upgrade_Nationalism
  UpgradeCameo3 = Upgrade_ChinaUraniumShells
  UpgradeCameo4 = Upgrade_ChinaNuclearTanks
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    
    ConditionState        = NONE
      Model               = NVBtMstrBl
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End
    ConditionState        = RUBBLE
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  Draw = W3DModelDraw ModuleTag_BARREL01
    OkToChangeModelColor = Yes
    ;;Normal
    ConditionState        = NONE
      Model               = NVBtMstrBlB1
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBlB1_D
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ChinaCommandTruck
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  
  ;Normal WeaponSet
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY   ChinaCommandTankCannonAP
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    Weapon            = SECONDARY ChinaCommandTankCannonHE
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY ChinaCommandTankCannonEMP
    AutoChooseSources = TERTIARY NONE
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = ChinaCommandTankArmor
    DamageFX        = HeavyTankDamageFX
  End
  
  BuildCost       = 2500
  BuildTime       = 15.0 ;20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 250

  Prerequisites
    Object = ChinaPropagandaCenter
  End

  ExperienceValue = 300 400 500 600   ;Experience point value at each level
  ExperienceRequired = 0 800 1750 3000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaVehicleCommandTruckCommandSet

  MaxSimultaneousOfType  = 1
  MaxSimultaneousLinkKey = CommandTruck

  ; *** AUDIO Parameters ***
  VoiceSelect           = BattleMasterTankVoiceSelect
  VoiceMove             = BattleMasterTankVoiceMove
  VoiceGuard            = BattleMasterTankVoiceMove
  VoiceAttack           = BattleMasterTankVoiceCrush    ;BattleMasterTankVoiceAttack
  SoundMoveStart        = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceCrush      = BattleMasterTankVoiceCrush
    VoiceEnter      = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE SCORE HUGE_VEHICLE DRONE COMMANDCENTER HERO
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1300.0
    InitialHealth   = 1300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 10
      AllowsPitch = Yes
      NaturalTurretPitch = 9
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ChinaCommandTankLocomotor
  Locomotor = SET_NORMAL_UPGRADED ChinaCommandTankLocomotorUpgraded

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = ProductionUpdate ModuleTag_01234
    ;nada
  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_ChinaCommandTankExplode
    FX  = FINAL    FX_GenericTankDeathExplosion
  End
  
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    CrateData = EliteTankCrateData
    CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_Prop01
    Radius                = 120
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_TroopCrawlerPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_TroopCrawlerPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = yes ; Needs this since Tower is not seperate object for crawler
  End

  Behavior = HordeUpdate ModuleTag_Stuff01
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 75          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY VEHICLE    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 1            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Stuff02
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = No                        ; turned on by upgrade
    TriggeredBy   = Upgrade_ChinaNuclearTanks
  End
  Behavior = LocomotorSetUpgrade ModuleTag_Stuff03
    TriggeredBy = Upgrade_ChinaNuclearTanks
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Stuff04
    TriggeredBy = Upgrade_ChinaUraniumShells
  End

  Behavior = AutoDepositUpdate ModuleTag_Tech04
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 50   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  ;These two modules spawn an invisible drone that is a type of STRUCTURE and MP_COUNT_FOR_VICTORY
  ;(Scenario is with 0 other buildings.) When the Mobile CC is destroyed, the invisible drone falls to the ground and then dies like a normal battle drone
  ;When the drone dies, it is the last STRUCTURE you own, and thus you lose.
  Behavior = GrantUpgradeCreate ModuleTag_StructureConditions01
    UpgradeToGrant = Upgrade_AmericaBattleDrone
  End

  Behavior = ObjectCreationUpgrade ModuleTag_StructureConditions02
    UpgradeObject = OCL_AmericaCommandTankIsStructure
    TriggeredBy   = Upgrade_AmericaBattleDrone
  End

  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers01
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = ChinaVehicleCommandTruckPowersCommandSet
  End
  
  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers02
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = ChinaVehicleCommandTruckCommandSet
  End

  Behavior           = OCLSpecialPower ModuleTag_DoomsDay01
    SpecialPowerTemplate = SuperweaponSpawnLeechInfector
    OCL                  = SUPERWEAPON_LeechInfectorDrone
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Sweet01
    SpecialPowerTemplate = SuperweaponSummonSweetTooth
    OCL                  = SUPERWEAPON_SweetTooth
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Science01
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_Science02
    SpecialPowerTemplate = SuperweaponClusterMines
    UpgradeOCL           = SCIENCE_NeutronClusterMines SUPERWEAPON_NeutronClusterMines
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science03
    SpecialPowerTemplate = SuperweaponEMPPulse
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_NeutronBomb
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_Science04
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 4000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 2000
    MoneyAmount          = 1000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_Science05
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science06
    SpecialPowerTemplate = Early_SuperweaponChinaCarpetBomb
    OCL                  = SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science07
    SpecialPowerTemplate = SuperweaponFrenzy
    UpgradeOCL           = SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science08
    SpecialPowerTemplate = SuperweaponNapalmStrike
    OCL                  = SUPERWEAPON_NapalmStrike
  End
  Behavior           = OCLSpecialPower ModuleTag_Veterancy01
    SpecialPowerTemplate = SuperweaponChinaCommandTankGrantVeterancy
    OCL                  = SUPERWEAPON_GrantVeterancy
    ReferenceObject      = ScavangedSalvageDecalObject
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Shenlongdong01
    SpecialPowerTemplate = SuperweaponShenlongParadrop
    OCL                  = SUPERWEAPON_ChinaCommandTankShenlongDrop
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  
  Behavior           = OCLSpecialPower ModuleTag_GoodCleaner
    SpecialPowerTemplate = SuperweaponContaminationCleanseBomb
    OCL                  = SUPERWEAPON_ContaminationCleanseBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
End

;*******************************
;           TANK GEN
;*******************************
Object Tank_ChinaTankCommandTank
  ;BATTUH MASTUH TANK REPORTING
  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging
  UpgradeCameo2 = Upgrade_Nationalism
  UpgradeCameo3 = Upgrade_ChinaUraniumShells
  UpgradeCameo4 = Upgrade_ChinaNuclearTanks
  UpgradeCameo5 = Upgrade_TankLightArmor
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ConditionState        = NONE
      Model               = NVBtMstrBl
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End
    ConditionState        = RUBBLE
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  Draw = W3DModelDraw ModuleTag_BARREL01
    OkToChangeModelColor = Yes
    ;;Normal
    ConditionState        = NONE
      Model               = NVBtMstrBlB1
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBlB1_D
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ChinaCommandTruck
  Side                = ChinaTankGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  
  ;Normal WeaponSet
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY   Tank_ChinaCommandTankCannonAPFSDS
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    Weapon            = SECONDARY Tank_ChinaCommandTankCannonHESH
    AutoChooseSources = SECONDARY NONE
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = ChinaCommandTankArmor
    DamageFX        = HeavyTankDamageFX
  End
  
  BuildCost       = 2500
  BuildTime       = 15.0 ;20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 250

  Prerequisites
    Object = Tank_ChinaIndustrialPlant
  End

  ExperienceValue = 300 400 500 600   ;Experience point value at each level
  ExperienceRequired = 0 800 1750 3000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Tank_ChinaVehicleCommandTruckCommandSet

  MaxSimultaneousOfType  = 1
  MaxSimultaneousLinkKey = CommandTruck

  ; *** AUDIO Parameters ***
  VoiceSelect           = BattleMasterTankVoiceSelect
  VoiceMove             = BattleMasterTankVoiceMove
  VoiceGuard            = BattleMasterTankVoiceMove
  VoiceAttack           = BattleMasterTankVoiceCrush    ;BattleMasterTankVoiceAttack
  SoundMoveStart        = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceCrush      = BattleMasterTankVoiceCrush
    VoiceEnter      = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE SCORE HUGE_VEHICLE DRONE HERO
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1300.0
    InitialHealth   = 1300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 10
      AllowsPitch = Yes
      NaturalTurretPitch = 9
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ChinaCommandTankLocomotor
  Locomotor = SET_NORMAL_UPGRADED ChinaCommandTankLocomotorUpgraded

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = ProductionUpdate ModuleTag_01234
    ;nada
  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_ChinaCommandTankExplode
    FX  = FINAL    FX_GenericTankDeathExplosion
  End
  
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    CrateData = EliteTankCrateData
    CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = LockWeaponCreate ModuleTag_Fix01
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_Prop01
    Radius                = 120
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_TroopCrawlerPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_TroopCrawlerPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = yes ; Needs this since Tower is not seperate object for crawler
  End

  Behavior = HordeUpdate ModuleTag_Stuff01
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 75          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY VEHICLE    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 1            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Stuff02
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = No                        ; turned on by upgrade
    TriggeredBy   = Upgrade_ChinaNuclearTanks
  End
  Behavior = LocomotorSetUpgrade ModuleTag_Stuff03
    TriggeredBy = Upgrade_ChinaNuclearTanks
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Stuff04
    TriggeredBy = Upgrade_ChinaUraniumShells
  End

  Behavior = MaxHealthUpgrade ModuleTag_Stuff05
    TriggeredBy   = Upgrade_TankLightArmor
    AddMaxHealth  = 500.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO
  End

  Behavior = AutoDepositUpdate ModuleTag_Tech04
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 50   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  ;These two modules spawn an invisible drone that is a type of STRUCTURE and MP_COUNT_FOR_VICTORY
  ;(Scenario is with 0 other buildings.) When the Mobile CC is destroyed, the invisible drone falls to the ground and then dies like a normal battle drone
  ;When the drone dies, it is the last STRUCTURE you own, and thus you lose.
  Behavior = GrantUpgradeCreate ModuleTag_StructureConditions01
    UpgradeToGrant = Upgrade_AmericaBattleDrone
  End

  Behavior = ObjectCreationUpgrade ModuleTag_StructureConditions02
    UpgradeObject = OCL_AmericaCommandTankIsStructure
    TriggeredBy   = Upgrade_AmericaBattleDrone
  End

  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers01
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = Tank_ChinaVehicleCommandTruckPowersCommandSet
  End
  
  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers02
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = Tank_ChinaVehicleCommandTruckCommandSet
  End

  Behavior           = OCLSpecialPower ModuleTag_DoomsDay01
    SpecialPowerTemplate = SuperweaponSpawnLeechInfector
    OCL                  = SUPERWEAPON_LeechInfectorDrone
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Sweet01
    SpecialPowerTemplate = SuperweaponSummonSweetTooth
    OCL                  = SUPERWEAPON_SweetTooth
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Science01
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_Science02
    SpecialPowerTemplate = SuperweaponV4Paradrop
    UpgradeOCL           = SCIENCE_V4ArtilleryDropUpgraded SUPERWEAPON_V4Paradrop2
    OCL                  = SUPERWEAPON_V4Paradrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes
  End
  Behavior           = OCLSpecialPower ModuleTag_Science03
    SpecialPowerTemplate = SuperweaponEMPPulse
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_NeutronBomb
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_Science04
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 4000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 2000
    MoneyAmount          = 1000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_Science05
    SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
    UpgradeOCL           = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science06 ;this has been removed from everywhere but the ChinaAirfield in CHI05
    SpecialPowerTemplate = SuperweaponChinaCarpetBomb
    OCL                  = SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science07
    SpecialPowerTemplate = SuperweaponChinaGlobalJammer
    OCL                  = SUPERWEAPON_ChinaRadarJammer
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science08
    SpecialPowerTemplate = Tank_SuperweaponTankParadrop
    UpgradeOCL           = SCIENCE_TankParadrop3 Tank_SUPERWEAPON_TankParadrop3
    UpgradeOCL           = SCIENCE_TankParadrop2 Tank_SUPERWEAPON_TankParadrop2
    OCL                  = Tank_SUPERWEAPON_TankParadrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 
  Behavior           = OCLSpecialPower ModuleTag_Science09
    SpecialPowerTemplate = SuperweaponFrenzy
    UpgradeOCL           = SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Veterancy01
    SpecialPowerTemplate = SuperweaponChinaCommandTankGrantVeterancy
    OCL                  = SUPERWEAPON_GrantVeterancy
    ReferenceObject      = ScavangedSalvageDecalObject
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_DontTazeMeBro01
    SpecialPowerTemplate = SuperweaponTeslaTankDrop
    OCL                  = SUPERWEAPON_ChinaCommandTankTeslaTankParadrop
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 
  
  Behavior           = OCLSpecialPower ModuleTag_GoodCleaner
    SpecialPowerTemplate = SuperweaponContaminationCleanseBomb
    OCL                  = SUPERWEAPON_ContaminationCleanseBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
End

;*******************************
;           NUKE GEN
;*******************************
Object Nuke_ChinaTankCommandTank
  ;BATTUH MASTUH TANK REPORTING
  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging
  UpgradeCameo2 = Upgrade_Nationalism
  UpgradeCameo3 = Nuke_Upgrade_ChinaWGUraniumShells
  UpgradeCameo4 = Nuke_Upgrade_ChinaFusionReactors
  UpgradeCameo5 = Upgrade_ChinaIsotopeStability
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    
    ConditionState        = NONE
      Model               = NVBtMstrBl
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End
    ConditionState        = RUBBLE
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  Draw = W3DModelDraw ModuleTag_BARREL01
    OkToChangeModelColor = Yes
    ;;Normal
    ConditionState        = NONE
      Model               = NVBtMstrBlB1
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBlB1_D
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ChinaCommandTruck
  Side                = ChinaNukeGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  
  ;Normal WeaponSet
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY   Nuke_ChinaCommandTankCannonRAD
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    Weapon            = SECONDARY Nuke_ChinaCommandTankCannonSSNR
    AutoChooseSources = SECONDARY NONE
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = ChinaCommandTankArmor
    DamageFX        = HeavyTankDamageFX
  End
  
  BuildCost       = 2500
  BuildTime       = 15.0 ;20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 250

  Prerequisites
    Object = Nuke_ChinaNuclearResearchPlant
  End

  ExperienceValue = 300 400 500 600   ;Experience point value at each level
  ExperienceRequired = 0 800 1750 3000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Nuke_ChinaVehicleCommandTruckCommandSet

  MaxSimultaneousOfType  = 1
  MaxSimultaneousLinkKey = CommandTruck

  ; *** AUDIO Parameters ***
  VoiceSelect           = BattleMasterTankVoiceSelect
  VoiceMove             = BattleMasterTankVoiceMove
  VoiceGuard            = BattleMasterTankVoiceMove
  VoiceAttack           = BattleMasterTankVoiceCrush    ;BattleMasterTankVoiceAttack
  SoundMoveStart        = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceCrush      = BattleMasterTankVoiceCrush
    VoiceEnter      = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE SCORE HUGE_VEHICLE DRONE HERO
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1300.0
    InitialHealth   = 1300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 10
      AllowsPitch = Yes
      NaturalTurretPitch = 9
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ChinaCommandTankLocomotorUpgraded
  Locomotor = SET_NORMAL_UPGRADED ChinaCommandTankLocomotorUpgradedFusion

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = ProductionUpdate ModuleTag_01234
    ;nada
  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_ChinaCommandTankExplode
    FX  = FINAL    FX_GenericTankDeathExplosion
  End
  
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    CrateData = EliteTankCrateData
    CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_Prop01
    Radius                = 120
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_TroopCrawlerPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_TroopCrawlerPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = yes ; Needs this since Tower is not seperate object for crawler
  End

  Behavior = HordeUpdate ModuleTag_Stuff01
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 75          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY VEHICLE    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 1            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Stuff02
    DeathWeapon   = NuclearTankDeathWeapon
    StartsActive  = Yes                        ; turned on by upgrade
    ConflictsWith   = Upgrade_ChinaIsotopeStability
  End
  Behavior = LocomotorSetUpgrade ModuleTag_Stuff03
    TriggeredBy = Nuke_Upgrade_ChinaFusionReactors
  End

  Behavior = WeaponBonusUpgrade ModuleTag_Stuff04
    TriggeredBy = Nuke_Upgrade_ChinaWGUraniumShells
  End

  Behavior = AutoDepositUpdate ModuleTag_Tech04
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 50   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  ;These two modules spawn an invisible drone that is a type of STRUCTURE and MP_COUNT_FOR_VICTORY
  ;(Scenario is with 0 other buildings.) When the Mobile CC is destroyed, the invisible drone falls to the ground and then dies like a normal battle drone
  ;When the drone dies, it is the last STRUCTURE you own, and thus you lose.
  Behavior = GrantUpgradeCreate ModuleTag_StructureConditions01
    UpgradeToGrant = Upgrade_AmericaBattleDrone
  End

  Behavior = ObjectCreationUpgrade ModuleTag_StructureConditions02
    UpgradeObject = OCL_AmericaCommandTankIsStructure
    TriggeredBy   = Upgrade_AmericaBattleDrone
  End

  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers01
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = Nuke_ChinaVehicleCommandTruckPowersCommandSet
  End
  
  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers02
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = Nuke_ChinaVehicleCommandTruckCommandSet
  End

  Behavior           = OCLSpecialPower ModuleTag_DoomsDay01
    SpecialPowerTemplate = SuperweaponSpawnLeechInfector
    OCL                  = SUPERWEAPON_LeechInfectorDrone
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Sweet01
    SpecialPowerTemplate = SuperweaponSummonSweetTooth
    OCL                  = SUPERWEAPON_SweetTooth
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Science01
    SpecialPowerTemplate = Nuke_SuperweaponArtilleryBarrage
    UpgradeOCL           = Nuke_SCIENCE_ArtilleryBarrage3 Nuke_SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = Nuke_SCIENCE_ArtilleryBarrage2 Nuke_SUPERWEAPON_ArtilleryBarrage2
    OCL                  = Nuke_SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_Science02
    SpecialPowerTemplate = SuperweaponClusterMines
    UpgradeOCL           = SCIENCE_NeutronClusterMines SUPERWEAPON_NeutronClusterMines
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science03
    SpecialPowerTemplate = SuperweaponEMPPulse
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_NeutronBomb
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_Science04
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 4000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 2000
    MoneyAmount          = 1000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_Science05
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science06 ;this has been removed from everywhere but the ChinaAirfield in CHI05
    SpecialPowerTemplate = Nuke_SuperweaponChinaCarpetBomb
    OCL                  = Nuke_SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science07
    SpecialPowerTemplate = SuperweaponNukeStrike
    OCL                  = SUPERWEAPON_NukeStrike
  End
  Behavior           = OCLSpecialPower ModuleTag_Science08
    SpecialPowerTemplate = SuperweaponFrenzy
    UpgradeOCL           = SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Veterancy01
    SpecialPowerTemplate = SuperweaponChinaCommandTankGrantVeterancy
    OCL                  = SUPERWEAPON_GrantVeterancy
    ReferenceObject      = ScavangedSalvageDecalObject
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_NuclearMinefield01
    SpecialPowerTemplate = SuperweaponTacticalNuclearMinefield
    OCL                  = SUPERWEAPON_ChinaCommandTankNuclearMinefield
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 
  
  Behavior           = OCLSpecialPower ModuleTag_GoodCleaner
    SpecialPowerTemplate = SuperweaponContaminationCleanseBomb
    OCL                  = SUPERWEAPON_ContaminationCleanseBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
End

;*******************************
;           INFA GEN
;*******************************
Object Infa_ChinaTankCommandTank
  ;BATTUH MASTUH TANK REPORTING
  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging
  UpgradeCameo2 = Upgrade_Fanaticism
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    
    ConditionState        = NONE
      Model               = NVBtMstrBl
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End
    ConditionState        = RUBBLE
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  Draw = W3DModelDraw ModuleTag_BARREL01
    OkToChangeModelColor = Yes
    ;;Normal
    ConditionState        = NONE
      Model               = NVBtMstrBlB1
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBlB1_D
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ChinaCommandTruck
  Side                = ChinaInfantryGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  
  ;Normal WeaponSet
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY   ChinaCommandTankCannonAP
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    Weapon            = SECONDARY ChinaCommandTankCannonHE
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY ChinaCommandTankCannonEMP
    AutoChooseSources = TERTIARY NONE
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = ChinaCommandTankArmor
    DamageFX        = HeavyTankDamageFX
  End
  
  BuildCost       = 2500
  BuildTime       = 15.0 ;20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 250

  Prerequisites
    Object = Infa_ChinaPropagandaCenter
  End

  ExperienceValue = 300 400 500 600   ;Experience point value at each level
  ExperienceRequired = 0 800 1750 3000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Infa_ChinaVehicleCommandTruckCommandSet

  MaxSimultaneousOfType  = 1
  MaxSimultaneousLinkKey = CommandTruck

  ; *** AUDIO Parameters ***
  VoiceSelect           = BattleMasterTankVoiceSelect
  VoiceMove             = BattleMasterTankVoiceMove
  VoiceGuard            = BattleMasterTankVoiceMove
  VoiceAttack           = BattleMasterTankVoiceCrush    ;BattleMasterTankVoiceAttack
  SoundMoveStart        = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceCrush      = BattleMasterTankVoiceCrush
    VoiceEnter      = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE SCORE HUGE_VEHICLE DRONE HERO
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1300.0
    InitialHealth   = 1300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 10
      AllowsPitch = Yes
      NaturalTurretPitch = 9
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ChinaCommandTankLocomotorUpgraded

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = ProductionUpdate ModuleTag_01234
    ;nada
  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_ChinaCommandTankExplode
    FX  = FINAL    FX_GenericTankDeathExplosion
  End
  
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    CrateData = EliteTankCrateData
    CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_Prop01
    Radius                = 120
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_TroopCrawlerPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_TroopCrawlerPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = yes ; Needs this since Tower is not seperate object for crawler
  End

  Behavior = HordeUpdate ModuleTag_Stuff01
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 75          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY VEHICLE    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 1            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = AutoDepositUpdate ModuleTag_Tech04
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 50   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  ;These two modules spawn an invisible drone that is a type of STRUCTURE and MP_COUNT_FOR_VICTORY
  ;(Scenario is with 0 other buildings.) When the Mobile CC is destroyed, the invisible drone falls to the ground and then dies like a normal battle drone
  ;When the drone dies, it is the last STRUCTURE you own, and thus you lose.
  Behavior = GrantUpgradeCreate ModuleTag_StructureConditions01
    UpgradeToGrant = Upgrade_AmericaBattleDrone
  End

  Behavior = ObjectCreationUpgrade ModuleTag_StructureConditions02
    UpgradeObject = OCL_AmericaCommandTankIsStructure
    TriggeredBy   = Upgrade_AmericaBattleDrone
  End

  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers01
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = Infa_ChinaVehicleCommandTruckPowersCommandSet
  End
  
  Behavior = CommandSetUpgrade ModuleTag_CommandSetPowers02
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = Infa_ChinaVehicleCommandTruckCommandSet
  End

  Behavior           = OCLSpecialPower ModuleTag_DoomsDay01
    SpecialPowerTemplate = SuperweaponSpawnLeechInfector
    OCL                  = SUPERWEAPON_LeechInfectorDrone
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Sweet01
    SpecialPowerTemplate = SuperweaponSummonSweetTooth
    OCL                  = SUPERWEAPON_SweetTooth
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Science01
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_Science02
    SpecialPowerTemplate = SuperweaponClusterMines
    UpgradeOCL           = SCIENCE_NeutronClusterMines SUPERWEAPON_NeutronClusterMines
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science03
    SpecialPowerTemplate = SuperweaponEMPPulse
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_NeutronBomb
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_Science04
    SpecialPowerTemplate = Infa_SuperweaponCashHack
    UpgradeMoneyAmount   = Infa_SCIENCE_CashHack3 8000
    UpgradeMoneyAmount   = Infa_SCIENCE_CashHack2 4000
    MoneyAmount          = 2000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_Science05
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science06  ;this has been removed from everywhere but the ChinaAirfield in CHI05
    SpecialPowerTemplate = Early_SuperweaponChinaCarpetBomb
    OCL                  = SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science07
    SpecialPowerTemplate = Early_SuperweaponFrenzy
    UpgradeOCL           = Early_SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = Early_SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science08
    SpecialPowerTemplate = SuperweaponNapalmStrike
    OCL                  = SUPERWEAPON_NapalmStrike
  End

  Behavior           = OCLSpecialPower ModuleTag_Veterancy01
    SpecialPowerTemplate = SuperweaponChinaCommandTankGrantVeterancy
    OCL                  = SUPERWEAPON_GrantVeterancy
    ReferenceObject      = ScavangedSalvageDecalObject
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_MegaMechManlyMan01
    SpecialPowerTemplate = SuperweaponIronDragonInfantryParadrop
    OCL                  = SUPERWEAPON_ChinaCommandTankIronDragonInfantryParadrop
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 
  
  Behavior           = OCLSpecialPower ModuleTag_GoodCleaner
    SpecialPowerTemplate = SuperweaponContaminationCleanseBomb
    OCL                  = SUPERWEAPON_ContaminationCleanseBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
End

;*******************************
;           SPEC GEN
;*******************************
Object Spec_ChinaTankCommandTank
  ;BATTUH MASTUH TANK REPORTING
  ; *** ART Parameters ***
  SelectPortrait         = SNBattlemaster_L
  ButtonImage            = SNBattlemaster
  
  UpgradeCameo1 = Upgrade_RavageTankArmor
  UpgradeCameo2 = Upgrade_DoctrineIronDragon
  UpgradeCameo3 = Upgrade_DoctrineWarWolf
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    
    ConditionState        = NONE
      Model               = NVBtMstrBl
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End
    ConditionState        = RUBBLE
      Model               = NVBtMstrBl_D
      ParticleSysBone     = SMOKE01 DozerSmokeLight
      ParticleSysBone     = SMOKE02 DozerSmokeHeavy
      ParticleSysBone     = SMOKE03 DozerSmokeHeavy
      ParticleSysBone     = SMOKE04 DozerSmokeHeavy
      ParticleSysBone     = SMOKE05 DozerSmokeHeavy
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate   = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  Draw = W3DModelDraw ModuleTag_BARREL01
    OkToChangeModelColor = Yes
    ;;Normal
    ConditionState        = NONE
      Model               = NVBtMstrBlB1
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVBtMstrBlB1_D
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponRecoilBone    = SECONDARY Barrel
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY Muzzle
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponRecoilBone    = TERTIARY Barrel
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      WeaponLaunchBone    = TERTIARY Muzzle
    End
    ConditionState        = RUBBLE
      Model               = None
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ChinaCommandTruck
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  
  ;Normal WeaponSet
  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY   Spec_ChinaCommandTankCannonLaser
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    Weapon            = SECONDARY ChinaCommandTankCannonHE
    AutoChooseSources = SECONDARY NONE
    ShareWeaponReloadTime = Yes
  End

  ArmorSet
    Conditions      = None
    Armor           = ChinaCommandTankArmor
    DamageFX        = HeavyTankDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = IronDragonDoctrineChinaCommandTankArmor
    DamageFX        = TankEraDamageFX
  End
  
  BuildCost       = 2500
  BuildTime       = 15.0 ;20.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 250

  Prerequisites
    Object = Spec_ChinaPropagandaCenter
  End

  ExperienceValue = 300 400 500 600   ;Experience point value at each level
  ExperienceRequired = 0 800 1750 3000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Spec_ChinaVehicleCommandTruckCommandSet

  MaxSimultaneousOfType  = 1
  MaxSimultaneousLinkKey = CommandTruck

  ; *** AUDIO Parameters ***
  VoiceSelect           = BattleMasterTankVoiceSelect
  VoiceMove             = BattleMasterTankVoiceMove
  VoiceGuard            = BattleMasterTankVoiceMove
  VoiceAttack           = BattleMasterTankVoiceCrush    ;BattleMasterTankVoiceAttack
  SoundMoveStart        = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoop
    VoiceCrush      = BattleMasterTankVoiceCrush
    VoiceEnter      = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT VEHICLE SCORE HUGE_VEHICLE DRONE HERO
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1300.0
    InitialHealth   = 1300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0
      TurretPitchRate = 10
      AllowsPitch = Yes
      NaturalTurretPitch = 9
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ChinaCommandTankLocomotorUpgraded
  Locomotor = SET_NORMAL_UPGRADED WarWolfDoctrineChinaCommandTankLocomotorUpgraded

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0
  End

  Behavior = ProductionUpdate ModuleTag_01234
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = CommandSetUpgrade ModuleTag_Doctrine01
    TriggeredBy = Upgrade_DoctrineIronDragon
    CommandSet = Spec_ChinaVehicleCommandTruckCommandSet_IronDragon
  End

  Behavior = CommandSetUpgrade ModuleTag_Doctrine02
    TriggeredBy = Upgrade_DoctrineWarWolf
    CommandSet = Spec_ChinaVehicleCommandTruckCommandSet_WarWolf
  End

  Behavior       = CostModifierUpgrade ModuleTag_Doctrine03
    TriggeredBy  = Upgrade_DoctrineWarWolf
    EffectKindOf = VEHICLE
    Percentage   = -15%
  End

  Behavior = ArmorUpgrade ModuleTag_Armor_DoctrineIronDragon01
    TriggeredBy  = Upgrade_DoctrineIronDragon
  End

  Behavior = LocomotorSetUpgrade ModuleTag_WarWolfDoctrine01
    TriggeredBy = Upgrade_DoctrineWarWolf
  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_ChinaCommandTankExplode
    FX  = FINAL    FX_GenericTankDeathExplosion
  End
  
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    CrateData = EliteTankCrateData
    CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = AutoHealBehavior ModuleTag_Repair01
    HealingAmount     = 1
    HealingDelay      = 100     ;msec
    Radius            = 100.0f
    StartsActive      = Yes
    KindOf            = VEHICLE
    ForbiddenKindOf   = AIRCRAFT
    SkipSelfForHealing = No
  End

  Behavior = MaxHealthUpgrade ModuleTag_Stuff01
    TriggeredBy   = Upgrade_RavageTankArmor
    AddMaxHealth  = 500.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO
  End

  Behavior = AutoDepositUpdate ModuleTag_Tech04
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 50   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
  End

  ;These two modules spawn an invisible drone that is a type of STRUCTURE and MP_COUNT_FOR_VICTORY
  ;(Scenario is with 0 other buildings.) When the Mobile CC is destroyed, the invisible drone falls to the ground and then dies like a normal battle drone
  ;When the drone dies, it is the last STRUCTURE you own, and thus you lose.
  Behavior = GrantUpgradeCreate ModuleTag_StructureConditions01
    UpgradeToGrant = Upgrade_AmericaBattleDrone
  End

  Behavior = ObjectCreationUpgrade ModuleTag_StructureConditions02
    UpgradeObject = OCL_AmericaCommandTankIsStructure
    TriggeredBy   = Upgrade_AmericaBattleDrone
  End

  Behavior           = OCLSpecialPower ModuleTag_DoomsDay01
    SpecialPowerTemplate = SuperweaponSpawnLeechInfector
    OCL                  = SUPERWEAPON_LeechInfectorDrone
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Sweet01
    SpecialPowerTemplate = SuperweaponSummonSweetTooth
    OCL                  = SUPERWEAPON_SweetTooth
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
    CreateLocation       = CREATE_AT_LOCATION
  End

  Behavior           = OCLSpecialPower ModuleTag_Science01
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
  Behavior           = OCLSpecialPower ModuleTag_Science02
    SpecialPowerTemplate = SuperweaponGrinderMines
    OCL                  = SUPERWEAPON_GrinderMineAmbush
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
  Behavior           = OCLSpecialPower ModuleTag_Science03
    SpecialPowerTemplate = SuperweaponEMPPulse
    UpgradeOCL           = SCIENCE_MOAB SUPERWEAPON_NeutronBomb
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = CashHackSpecialPower ModuleTag_Science04
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 4000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 2000
    MoneyAmount          = 1000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_Science05
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science06  ;this has been removed from everywhere but the ChinaAirfield in CHI05
    SpecialPowerTemplate = SuperweaponChinaShockwaveBombs
    OCL                  = SUPERWEAPON_ShockBombParaBombing
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_Science07
    SpecialPowerTemplate = SuperweaponChinaGlobalJammer
    OCL                  = SUPERWEAPON_ChinaRadarJammer
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_Science08
    SpecialPowerTemplate = Spec_SuperweaponNapalmStrike
    UpgradeOCL           = Spec_SCIENCE_NapalmStrike3 Spec_SUPERWEAPON_NapalmStrike_Level3
    UpgradeOCL           = Spec_SCIENCE_NapalmStrike2 Spec_SUPERWEAPON_NapalmStrike_Level2
    OCL                  = Spec_SUPERWEAPON_NapalmStrike
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_Veterancy01
    SpecialPowerTemplate = SuperweaponChinaCommandTankGrantVeterancy
    OCL                  = SUPERWEAPON_GrantVeterancy
    ReferenceObject      = ScavangedSalvageDecalObject
    CreateLocation       = CREATE_AT_LOCATION
  End
  
  Behavior           = OCLSpecialPower ModuleTag_GoodCleaner
    SpecialPowerTemplate = SuperweaponContaminationCleanseBomb
    OCL                  = SUPERWEAPON_ContaminationCleanseBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 13.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
End